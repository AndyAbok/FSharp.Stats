<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Integration
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Benedikt Venn, Timo Muehlhaus, Heinrich Lukas Weil, David Zimmer, Kevin Schneider, open source contributors">
    <link rel="shortcut icon" type="image/x-icon" href="https://fslab.org/FSharp.Stats//img/favicon.ico">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script> -->

    <link type="text/css" rel="stylesheet" href="https://fslab.org/FSharp.Stats/content/fsdocs-default.css" />
    <link type="text/css" rel="stylesheet" href="https://fslab.org/FSharp.Stats/content/fsdocs-custom.css" />
    <script type="text/javascript" src="https://fslab.org/FSharp.Stats/content/fsdocs-tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- BEGIN SEARCH BOX: this adds support for the search box -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
    <!-- END SEARCH BOX: this adds support for the search box -->
    
</head> 

<body>
    <div class="columns is-fullheight m-0">
        <div id="fsdocs-menu" class="column is-2 is-paddingless">
            <aside class="menu">
                <div class="container is-paddingless is-marginless has-background-dark">
                    <a href="https://fslab.org/FSharp.Stats/">
                        <figure class="image is-128x128 container">
                            <img src="https://fslab.org/FSharp.Stats/img/logo.png">
                        </figure>
                    </a>
                    <h2 class="title has-text-centered has-text-white pb-4">FSharp.Stats</h2>
                </div>
                <div class="content">
                    <!-- BEGIN SEARCH BOX: this adds support for the search box -->
                    <div id="header">
                        <div class="searchbox" id="fsdocs-searchbox">
                            <label for="search-by">
                                <i class="fas fa-search"></i>
                            </label>
                            <input data-search-input="" id="search-by" type="search" placeholder="Search..." class="input"/>
                            <span data-search-clear="">
                                <i class="fas fa-times"></i>
                            </span>
                        </div>
                    </div>
                    <!-- END SEARCH BOX: this adds support for the search box -->
                    <ul class="navbar-nav">
                        <li class="nav-header">Links</li>
                        <li class="nav-item" id="fsdocs-license-link"><a class="nav-link" href="https://github.com/fslaborg/FSharp.Stats/blob/developer/LICENSE">License (MIT)</a></li>
                        <li class="nav-item" id="fsdocs-release-notes-link"><a class="nav-link" href="https://github.com/fslaborg/FSharp.Stats/blob/developer/RELEASE_NOTES.md">Release Notes</a></li>
                        <li class="nav-item" id="fsdocs-repository-link"><a class="nav-link" href="https://github.com/fslaborg/FSharp.Stats/">Source Repository</a></li>
                        <li class="nav-header">
  Documentation
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fslab.org/FSharp.Stats/BasicStats.html">
    Basics

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fslab.org/FSharp.Stats/Clustering.html">
    Clustering

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fslab.org/FSharp.Stats/Correlation.html">
    Correlation

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fslab.org/FSharp.Stats/Covariance.html">
    Covariance

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fslab.org/FSharp.Stats/CrossValidation.html">
    Cross validation

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fslab.org/FSharp.Stats/Distributions.html">
    Probability Distributions

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fslab.org/FSharp.Stats/Fitting.html">
    Fitting

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fslab.org/FSharp.Stats/GoodnessOfFit.html">
    Fit quality

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fslab.org/FSharp.Stats/GrowthCurve.html">
    Growth curve

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fslab.org/FSharp.Stats/Imputation.html">
    Imputation

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fslab.org/FSharp.Stats/Integration.html">
    Integration

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fslab.org/FSharp.Stats/Interpolation.html">
    Interpolation

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fslab.org/FSharp.Stats/LinearAlgebra.html">
    Linear Algebra

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fslab.org/FSharp.Stats/Matrix_Vector.html">
    Matrix and Vector

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fslab.org/FSharp.Stats/Signal.html">
    Signal

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fslab.org/FSharp.Stats/Testing.html">
    Statistical testing

  </a>
</li>
                        <li class="nav-header">
  API Reference
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fslab.org/FSharp.Stats/reference/index.html">
    All Namespaces
  </a>
</li>
                    </ul>
                </div>
            </aside>
        </div>
        <div class="column is-10 is-paddingless">
            <div class="section pt-4">
                <div class="container" id="fsdocs-content">
                    <h1><a name="Integration" class="anchor" href="#Integration">Integration</a></h1>
<p><a href="https://mybinder.org/v2/gh/fslaborg/FSharp.Stats/gh-pages?filepath=Integration.ipynb"><img src="https://mybinder.org/badge_logo.svg" alt="Binder" /></a></p>
<h2><a name="Differentiation" class="anchor" href="#Differentiation">Differentiation</a></h2>
<p>Numerical differentiation is used to estimate the derivative of a mathematical function using values of the function and perhaps other knowledge about the function.</p>
<h3><a name="Three-Point-Differentiation" class="anchor" href="#Three-Point-Differentiation">Three-Point Differentiation</a></h3>
<p>FSharp.Stats implements a three point differentiation method. This method takes a set of values and their function values. For a given value xT of the set, one defines three other points which should be considered to calculate the differential at xT.
Here follows a small snippet.</p>
<p>First, we create our data. In this case our function is f(x) = x ^ 3.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="id">Stats</span>

<span class="c">// x data</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="id">xs</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="id">init</span> <span class="n">100</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs6', 6)" onmouseover="showTip(event, 'fs6', 6)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs7', 7)" onmouseover="showTip(event, 'fs7', 7)" class="fn">float</span> <span onmouseout="hideTip(event, 'fs6', 8)" onmouseover="showTip(event, 'fs6', 8)" class="fn">x</span> <span class="o">/</span> <span class="n">8.</span><span class="pn">)</span>
<span class="c">// y data</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs8', 9)" onmouseover="showTip(event, 'fs8', 9)" class="id">ys</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 10)" onmouseover="showTip(event, 'fs4', 10)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs9', 11)" onmouseover="showTip(event, 'fs9', 11)" class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs10', 12)" onmouseover="showTip(event, 'fs10', 12)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs10', 13)" onmouseover="showTip(event, 'fs10', 13)" class="fn">x</span> <span class="o">**</span> <span class="n">3.</span><span class="pn">)</span> <span onmouseout="hideTip(event, 'fs3', 14)" onmouseover="showTip(event, 'fs3', 14)" class="id">xs</span>
</code></pre>
<p>Now we apply the threePointDifferentiation to every point starting with the second and ending with the second last. We can't do it for every point because for every point we need to have three other points in close proximity.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs11', 15)" onmouseover="showTip(event, 'fs11', 15)" class="id">y&#39;s</span> <span class="o">=</span> 
    <span class="pn">[|</span>
    <span class="k">for</span> <span onmouseout="hideTip(event, 'fs12', 16)" onmouseover="showTip(event, 'fs12', 16)" class="fn">i</span> <span class="o">=</span> <span class="n">1</span> <span class="k">to</span> <span onmouseout="hideTip(event, 'fs3', 17)" onmouseover="showTip(event, 'fs3', 17)" class="id">xs</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs13', 18)" onmouseover="showTip(event, 'fs13', 18)" class="id">Length</span> <span class="o">-</span> <span class="n">2</span> <span class="k">do</span>
        <span class="k">yield</span> <span onmouseout="hideTip(event, 'fs3', 19)" onmouseover="showTip(event, 'fs3', 19)" class="id">xs</span><span class="id">.</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs12', 20)" onmouseover="showTip(event, 'fs12', 20)" class="fn">i</span><span class="pn">]</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs14', 21)" onmouseover="showTip(event, 'fs14', 21)" class="id">Integration</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs15', 22)" onmouseover="showTip(event, 'fs15', 22)" class="m">Differentiation</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs16', 23)" onmouseover="showTip(event, 'fs16', 23)" class="id">differentiateThreePoint</span> <span onmouseout="hideTip(event, 'fs3', 24)" onmouseover="showTip(event, 'fs3', 24)" class="id">xs</span> <span onmouseout="hideTip(event, 'fs8', 25)" onmouseover="showTip(event, 'fs8', 25)" class="id">ys</span> <span onmouseout="hideTip(event, 'fs12', 26)" onmouseover="showTip(event, 'fs12', 26)" class="fn">i</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs12', 27)" onmouseover="showTip(event, 'fs12', 27)" class="fn">i</span><span class="o">-</span><span class="n">1</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs12', 28)" onmouseover="showTip(event, 'fs12', 28)" class="fn">i</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs12', 29)" onmouseover="showTip(event, 'fs12', 29)" class="fn">i</span><span class="o">+</span><span class="n">1</span><span class="pn">)</span>
    <span class="pn">|]</span>
</code></pre>
<p>We compare the resulting values with the values of the known differential f'(x) = 3x^2, here called g(x)</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs17', 30)" onmouseover="showTip(event, 'fs17', 30)" class="id">Plotly</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs18', 31)" onmouseover="showTip(event, 'fs18', 31)" class="id">NET</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs19', 32)" onmouseover="showTip(event, 'fs19', 32)" class="id">comparisonChart</span> <span class="o">=</span> 
    <span class="pn">[</span>
    <span onmouseout="hideTip(event, 'fs20', 33)" onmouseover="showTip(event, 'fs20', 33)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 34)" onmouseover="showTip(event, 'fs21', 34)" class="id">Point</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs3', 35)" onmouseover="showTip(event, 'fs3', 35)" class="id">xs</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs8', 36)" onmouseover="showTip(event, 'fs8', 36)" class="id">ys</span><span class="pn">,</span><span class="fn">Name</span> <span class="o">=</span> <span class="s">&quot;f(x)&quot;</span><span class="pn">)</span>
    <span onmouseout="hideTip(event, 'fs20', 37)" onmouseover="showTip(event, 'fs20', 37)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 38)" onmouseover="showTip(event, 'fs21', 38)" class="id">Point</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs11', 39)" onmouseover="showTip(event, 'fs11', 39)" class="id">y&#39;s</span><span class="pn">,</span><span class="fn">Name</span> <span class="o">=</span> <span class="s">&quot;f&#39;(x)&quot;</span><span class="pn">)</span>
    <span onmouseout="hideTip(event, 'fs20', 40)" onmouseover="showTip(event, 'fs20', 40)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 41)" onmouseover="showTip(event, 'fs21', 41)" class="id">Point</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs4', 42)" onmouseover="showTip(event, 'fs4', 42)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs9', 43)" onmouseover="showTip(event, 'fs9', 43)" class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs10', 44)" onmouseover="showTip(event, 'fs10', 44)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs10', 45)" onmouseover="showTip(event, 'fs10', 45)" class="fn">x</span><span class="pn">,</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs10', 46)" onmouseover="showTip(event, 'fs10', 46)" class="fn">x</span> <span class="o">**</span> <span class="n">2.</span><span class="pn">)</span> <span class="o">*</span> <span class="n">3.</span><span class="pn">)</span> <span onmouseout="hideTip(event, 'fs3', 47)" onmouseover="showTip(event, 'fs3', 47)" class="id">xs</span><span class="pn">,</span><span class="fn">Name</span> <span class="o">=</span> <span class="s">&quot;g(x)&quot;</span><span class="pn">)</span>
    <span class="pn">]</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs20', 48)" onmouseover="showTip(event, 'fs20', 48)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs22', 49)" onmouseover="showTip(event, 'fs22', 49)" class="id">Combine</span>
</code></pre>
<div id="bb391084-2db8-4ebd-8868-52b24cb576a7" style="width: 600px; height: 600px;"><!-- Plotly chart will be drawn inside this DIV --></div>
<script type="text/javascript">

            var renderPlotly_bb3910842db84ebd886852b24cb576a7 = function() {
            var fsharpPlotlyRequire = requirejs.config({context:'fsharp-plotly',paths:{plotly:'https://cdn.plot.ly/plotly-latest.min'}}) || require;
            fsharpPlotlyRequire(['plotly'], function(Plotly) {

            var data = [{"type":"scatter","x":[0.0,0.125,0.25,0.375,0.5,0.625,0.75,0.875,1.0,1.125,1.25,1.375,1.5,1.625,1.75,1.875,2.0,2.125,2.25,2.375,2.5,2.625,2.75,2.875,3.0,3.125,3.25,3.375,3.5,3.625,3.75,3.875,4.0,4.125,4.25,4.375,4.5,4.625,4.75,4.875,5.0,5.125,5.25,5.375,5.5,5.625,5.75,5.875,6.0,6.125,6.25,6.375,6.5,6.625,6.75,6.875,7.0,7.125,7.25,7.375,7.5,7.625,7.75,7.875,8.0,8.125,8.25,8.375,8.5,8.625,8.75,8.875,9.0,9.125,9.25,9.375,9.5,9.625,9.75,9.875,10.0,10.125,10.25,10.375,10.5,10.625,10.75,10.875,11.0,11.125,11.25,11.375,11.5,11.625,11.75,11.875,12.0,12.125,12.25,12.375],"y":[0.0,0.001953125,0.015625,0.052734375,0.125,0.244140625,0.421875,0.669921875,1.0,1.423828125,1.953125,2.599609375,3.375,4.291015625,5.359375,6.591796875,8.0,9.595703125,11.390625,13.396484375,15.625,18.087890625,20.796875,23.763671875,27.0,30.517578125,34.328125,38.443359375,42.875,47.634765625,52.734375,58.185546875,64.0,70.189453125,76.765625,83.740234375,91.125,98.931640625,107.171875,115.857421875,125.0,134.611328125,144.703125,155.287109375,166.375,177.978515625,190.109375,202.779296875,216.0,229.783203125,244.140625,259.083984375,274.625,290.775390625,307.546875,324.951171875,343.0,361.705078125,381.078125,401.130859375,421.875,443.322265625,465.484375,488.373046875,512.0,536.376953125,561.515625,587.427734375,614.125,641.619140625,669.921875,699.044921875,729.0,759.798828125,791.453125,823.974609375,857.375,891.666015625,926.859375,962.966796875,1000.0,1037.970703125,1076.890625,1116.771484375,1157.625,1199.462890625,1242.296875,1286.138671875,1331.0,1376.892578125,1423.828125,1471.818359375,1520.875,1571.009765625,1622.234375,1674.560546875,1728.0,1782.564453125,1838.265625,1895.115234375],"mode":"markers","name":"f(x)","marker":{}},{"type":"scatter","x":[0.125,0.25,0.375,0.5,0.625,0.75,0.875,1.0,1.125,1.25,1.375,1.5,1.625,1.75,1.875,2.0,2.125,2.25,2.375,2.5,2.625,2.75,2.875,3.0,3.125,3.25,3.375,3.5,3.625,3.75,3.875,4.0,4.125,4.25,4.375,4.5,4.625,4.75,4.875,5.0,5.125,5.25,5.375,5.5,5.625,5.75,5.875,6.0,6.125,6.25,6.375,6.5,6.625,6.75,6.875,7.0,7.125,7.25,7.375,7.5,7.625,7.75,7.875,8.0,8.125,8.25,8.375,8.5,8.625,8.75,8.875,9.0,9.125,9.25,9.375,9.5,9.625,9.75,9.875,10.0,10.125,10.25,10.375,10.5,10.625,10.75,10.875,11.0,11.125,11.25,11.375,11.5,11.625,11.75,11.875,12.0,12.125,12.25],"y":[0.0625,0.203125,0.4375,0.765625,1.1875,1.703125,2.3125,3.015625,3.8125,4.703125,5.6875,6.765625,7.9375,9.203125,10.5625,12.015625,13.5625,15.203125,16.9375,18.765625,20.6875,22.703125,24.8125,27.015625,29.3125,31.703125,34.1875,36.765625,39.4375,42.203125,45.0625,48.015625,51.0625,54.203125,57.4375,60.765625,64.1875,67.703125,71.3125,75.015625,78.8125,82.703125,86.6875,90.765625,94.9375,99.203125,103.5625,108.015625,112.5625,117.203125,121.9375,126.765625,131.6875,136.703125,141.8125,147.015625,152.3125,157.703125,163.1875,168.765625,174.4375,180.203125,186.0625,192.015625,198.0625,204.203125,210.4375,216.765625,223.1875,229.703125,236.3125,243.015625,249.8125,256.703125,263.6875,270.765625,277.9375,285.203125,292.5625,300.015625,307.5625,315.203125,322.9375,330.765625,338.6875,346.703125,354.8125,363.015625,371.3125,379.703125,388.1875,396.765625,405.4375,414.203125,423.0625,432.015625,441.0625,450.203125],"mode":"markers","name":"f'(x)","marker":{}},{"type":"scatter","x":[0.0,0.125,0.25,0.375,0.5,0.625,0.75,0.875,1.0,1.125,1.25,1.375,1.5,1.625,1.75,1.875,2.0,2.125,2.25,2.375,2.5,2.625,2.75,2.875,3.0,3.125,3.25,3.375,3.5,3.625,3.75,3.875,4.0,4.125,4.25,4.375,4.5,4.625,4.75,4.875,5.0,5.125,5.25,5.375,5.5,5.625,5.75,5.875,6.0,6.125,6.25,6.375,6.5,6.625,6.75,6.875,7.0,7.125,7.25,7.375,7.5,7.625,7.75,7.875,8.0,8.125,8.25,8.375,8.5,8.625,8.75,8.875,9.0,9.125,9.25,9.375,9.5,9.625,9.75,9.875,10.0,10.125,10.25,10.375,10.5,10.625,10.75,10.875,11.0,11.125,11.25,11.375,11.5,11.625,11.75,11.875,12.0,12.125,12.25,12.375],"y":[0.0,0.046875,0.1875,0.421875,0.75,1.171875,1.6875,2.296875,3.0,3.796875,4.6875,5.671875,6.75,7.921875,9.1875,10.546875,12.0,13.546875,15.1875,16.921875,18.75,20.671875,22.6875,24.796875,27.0,29.296875,31.6875,34.171875,36.75,39.421875,42.1875,45.046875,48.0,51.046875,54.1875,57.421875,60.75,64.171875,67.6875,71.296875,75.0,78.796875,82.6875,86.671875,90.75,94.921875,99.1875,103.546875,108.0,112.546875,117.1875,121.921875,126.75,131.671875,136.6875,141.796875,147.0,152.296875,157.6875,163.171875,168.75,174.421875,180.1875,186.046875,192.0,198.046875,204.1875,210.421875,216.75,223.171875,229.6875,236.296875,243.0,249.796875,256.6875,263.671875,270.75,277.921875,285.1875,292.546875,300.0,307.546875,315.1875,322.921875,330.75,338.671875,346.6875,354.796875,363.0,371.296875,379.6875,388.171875,396.75,405.421875,414.1875,423.046875,432.0,441.046875,450.1875,459.421875],"mode":"markers","name":"g(x)","marker":{}}];
            var layout = {};
            var config = {};
            Plotly.newPlot('bb391084-2db8-4ebd-8868-52b24cb576a7', data, layout, config);
});
            };
            if ((typeof(requirejs) !==  typeof(Function)) || (typeof(requirejs.config) !== typeof(Function))) {
                var script = document.createElement("script");
                script.setAttribute("src", "https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js");
                script.onload = function(){
                    renderPlotly_bb3910842db84ebd886852b24cb576a7();
                };
                document.getElementsByTagName("head")[0].appendChild(script);
            }
            else {
                renderPlotly_bb3910842db84ebd886852b24cb576a7();
            }
</script>

<h3><a name="Two-Point-Differentiation" class="anchor" href="#Two-Point-Differentiation">Two-Point Differentiation</a></h3>
<p>To calculate the approximation for the derivative, a Two-Point Differentiation calculates the difference of f(x) at x and f(x) at x+h and correlates it to h.
This will give better approximations the smaller h is.
The function uses two different mathematical approaches to decrease the error, one for h &gt; 1. and one for h &lt; 1.</p>
</br>
<p><img src="img/Derivative.svg.png" alt="Data model" /></p>
</br>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 53)" onmouseover="showTip(event, 'fs1', 53)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs2', 54)" onmouseover="showTip(event, 'fs2', 54)" class="id">Stats</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs14', 55)" onmouseover="showTip(event, 'fs14', 55)" class="id">Integration</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs15', 56)" onmouseover="showTip(event, 'fs15', 56)" class="m">Differentiation</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs25', 57)" onmouseover="showTip(event, 'fs25', 57)" class="m">TwoPointDifferentiation</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 58)" onmouseover="showTip(event, 'fs1', 58)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs2', 59)" onmouseover="showTip(event, 'fs2', 59)" class="id">Stats</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs14', 60)" onmouseover="showTip(event, 'fs14', 60)" class="id">Integration</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs15', 61)" onmouseover="showTip(event, 'fs15', 61)" class="m">Differentiation</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 62)" onmouseover="showTip(event, 'fs26', 62)" class="fn">testFunction</span> <span onmouseout="hideTip(event, 'fs10', 63)" onmouseover="showTip(event, 'fs10', 63)" class="fn">x</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs10', 64)" onmouseover="showTip(event, 'fs10', 64)" class="fn">x</span><span class="o">**</span><span class="n">2.</span> 

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs27', 65)" onmouseover="showTip(event, 'fs27', 65)" class="id">test1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs28', 66)" onmouseover="showTip(event, 'fs28', 66)" class="fn">differentiate</span> <span class="n">0.5</span> <span onmouseout="hideTip(event, 'fs26', 67)" onmouseover="showTip(event, 'fs26', 67)" class="fn">testFunction</span> <span class="n">2.</span>
<span class="c">//Result for test1 is: 4.00</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs29', 68)" onmouseover="showTip(event, 'fs29', 68)" class="id">test2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs28', 69)" onmouseover="showTip(event, 'fs28', 69)" class="fn">differentiate</span> <span class="n">3.</span> <span onmouseout="hideTip(event, 'fs26', 70)" onmouseover="showTip(event, 'fs26', 70)" class="fn">testFunction</span> <span class="n">2.</span>
<span class="c">//Result for test2 is: 7.00</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs30', 71)" onmouseover="showTip(event, 'fs30', 71)" class="id">test3</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs28', 72)" onmouseover="showTip(event, 'fs28', 72)" class="fn">differentiate</span> <span class="n">0.1</span> <span onmouseout="hideTip(event, 'fs26', 73)" onmouseover="showTip(event, 'fs26', 73)" class="fn">testFunction</span> <span class="n">2.</span>
<span class="c">//Result for test3 is: 4.00</span>
</code></pre>
<ul>
<li>The correct result for test1 (f(x) = x<em></em>2.) is assumed to be 4.</li>
<li>With a higher h (for test2 h = 3., compared to the 0.5 used in test1) the approximation error increases.</li>
</ul>
<p>You can try and find an optimal h - value with the "differentiateOptimalHBy" - function.
This function uses the first h-value it assumes to give good results for the numerical differentiation calculation.
Due to this, possible error due to float precision is avoided.
In the following example this is not really necessary, as values are quite big.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs31', 74)" onmouseover="showTip(event, 'fs31', 74)" class="id">hArray</span> <span class="o">=</span> <span class="pn">[|</span><span class="o">0.1</span> <span class="o">..</span> <span class="n">0.1</span> <span class="o">..</span> <span class="n">2.</span><span class="pn">|]</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs32', 75)" onmouseover="showTip(event, 'fs32', 75)" class="id">test4</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs33', 76)" onmouseover="showTip(event, 'fs33', 76)" class="fn">differentiateOptimalHBy</span> <span onmouseout="hideTip(event, 'fs31', 77)" onmouseover="showTip(event, 'fs31', 77)" class="id">hArray</span> <span onmouseout="hideTip(event, 'fs26', 78)" onmouseover="showTip(event, 'fs26', 78)" class="fn">testFunction</span> <span class="n">2.</span>
<span class="c">//Result for test4 is: 4.00</span>
</code></pre>
<p>If you want to use a presuggested hArray then you can use the "differentiateOptimalH" function.
This function uses an array from 0.01 to 5e^-100 in [|0.01; 0.005; 0.001; 0.0005; 0.0001 ..|]-increments as hArray.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs34', 79)" onmouseover="showTip(event, 'fs34', 79)" class="id">test5</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs35', 80)" onmouseover="showTip(event, 'fs35', 80)" class="fn">differentiateOptimalH</span> <span onmouseout="hideTip(event, 'fs26', 81)" onmouseover="showTip(event, 'fs26', 81)" class="fn">testFunction</span> <span class="n">2.</span> 
<span class="c">//Result for test5 is: 4.00</span>
</code></pre>

                </div>
            </div>
        </div>
        <div class="fsdocs-tip" id="fs1">Multiple items<br />namespace FSharp<br /><br />--------------------<br />namespace Microsoft.FSharp</div>
<div class="fsdocs-tip" id="fs2">namespace FSharp.Stats</div>
<div class="fsdocs-tip" id="fs3">val xs : float []</div>
<div class="fsdocs-tip" id="fs4">Multiple items<br />module Array<br /><br />from FSharp.Stats<br /><br />--------------------<br />module Array<br /><br />from Microsoft.FSharp.Collections</div>
<div class="fsdocs-tip" id="fs5">val init : count:int -&gt; initializer:(int -&gt; &#39;T) -&gt; &#39;T []</div>
<div class="fsdocs-tip" id="fs6">val x : int</div>
<div class="fsdocs-tip" id="fs7">Multiple items<br />val float : value:&#39;T -&gt; float (requires member op_Explicit)<br /><br />--------------------<br />type float = System.Double<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; = float</div>
<div class="fsdocs-tip" id="fs8">val ys : float []</div>
<div class="fsdocs-tip" id="fs9">val map : mapping:(&#39;T -&gt; &#39;U) -&gt; array:&#39;T [] -&gt; &#39;U []</div>
<div class="fsdocs-tip" id="fs10">val x : float</div>
<div class="fsdocs-tip" id="fs11">val y&#39;s : (float * float) []</div>
<div class="fsdocs-tip" id="fs12">val i : int</div>
<div class="fsdocs-tip" id="fs13">property System.Array.Length: int with get</div>
<div class="fsdocs-tip" id="fs14">namespace FSharp.Stats.Integration</div>
<div class="fsdocs-tip" id="fs15">module Differentiation<br /><br />from FSharp.Stats.Integration</div>
<div class="fsdocs-tip" id="fs16">val differentiateThreePoint : xValues:float [] -&gt; yValues:float [] -&gt; idxT:int -&gt; idx0:int -&gt; idx1:int -&gt; idx2:int -&gt; float</div>
<div class="fsdocs-tip" id="fs17">namespace Plotly</div>
<div class="fsdocs-tip" id="fs18">namespace Plotly.NET</div>
<div class="fsdocs-tip" id="fs19">val comparisonChart : GenericChart.GenericChart</div>
<div class="fsdocs-tip" id="fs20">type Chart =<br />&#160;&#160;static member Area : xy:seq&lt;#IConvertible * #IConvertible&gt; * ?Name:string * ?ShowMarkers:bool * ?Showlegend:bool * ?MarkerSymbol:Symbol * ?Color:string * ?Opacity:float * ?Labels:seq&lt;string&gt; * ?TextPosition:TextPosition * ?TextFont:Font * ?Dash:DrawingStyle * ?Width:&#39;a2 -&gt; GenericChart<br />&#160;&#160;static member Area : x:seq&lt;#IConvertible&gt; * y:seq&lt;#IConvertible&gt; * ?Name:string * ?ShowMarkers:bool * ?Showlegend:bool * ?MarkerSymbol:Symbol * ?Color:string * ?Opacity:float * ?Labels:seq&lt;string&gt; * ?TextPosition:TextPosition * ?TextFont:Font * ?Dash:DrawingStyle * ?Width:&#39;a2 -&gt; GenericChart<br />&#160;&#160;static member Bar : keysvalues:seq&lt;#IConvertible * #IConvertible&gt; * ?Name:string * ?Showlegend:bool * ?Color:&#39;a2 * ?Opacity:float * ?Labels:seq&lt;string&gt; * ?TextPosition:TextPosition * ?TextFont:Font * ?Marker:Marker -&gt; GenericChart<br />&#160;&#160;static member Bar : keys:seq&lt;#IConvertible&gt; * values:seq&lt;#IConvertible&gt; * ?Name:string * ?Showlegend:bool * ?Color:&#39;a2 * ?Opacity:float * ?Labels:seq&lt;string&gt; * ?TextPosition:TextPosition * ?TextFont:Font * ?Marker:Marker -&gt; GenericChart<br />&#160;&#160;static member BoxPlot : xy:seq&lt;&#39;a0 * &#39;a1&gt; * ?Name:string * ?Showlegend:bool * ?Color:string * ?Fillcolor:&#39;a2 * ?Opacity:float * ?Whiskerwidth:&#39;a3 * ?Boxpoints:Boxpoints * ?Boxmean:BoxMean * ?Jitter:&#39;a4 * ?Pointpos:&#39;a5 * ?Orientation:Orientation * ?Marker:Marker * ?Line:Line * ?Alignmentgroup:&#39;a6 * ?Offsetgroup:&#39;a7 * ?Notched:bool * ?NotchWidth:float * ?QuartileMethod:QuartileMethod -&gt; GenericChart<br />&#160;&#160;static member BoxPlot : ?x:&#39;a0 * ?y:&#39;a1 * ?Name:string * ?Showlegend:bool * ?Color:string * ?Fillcolor:&#39;a2 * ?Opacity:float * ?Whiskerwidth:&#39;a3 * ?Boxpoints:Boxpoints * ?Boxmean:BoxMean * ?Jitter:&#39;a4 * ?Pointpos:&#39;a5 * ?Orientation:Orientation * ?Marker:Marker * ?Line:Line * ?Alignmentgroup:&#39;a6 * ?Offsetgroup:&#39;a7 * ?Notched:bool * ?NotchWidth:float * ?QuartileMethod:QuartileMethod -&gt; GenericChart<br />&#160;&#160;static member Bubble : xysizes:seq&lt;#IConvertible * #IConvertible * #IConvertible&gt; * ?Name:string * ?Showlegend:bool * ?MarkerSymbol:Symbol * ?Color:string * ?Opacity:float * ?Labels:seq&lt;string&gt; * ?TextPosition:TextPosition * ?TextFont:Font * ?StackGroup:string * ?Orientation:Orientation * ?GroupNorm:GroupNorm * ?UseWebGL:bool -&gt; GenericChart<br />&#160;&#160;static member Bubble : x:seq&lt;#IConvertible&gt; * y:seq&lt;#IConvertible&gt; * sizes:seq&lt;#IConvertible&gt; * ?Name:string * ?Showlegend:bool * ?MarkerSymbol:Symbol * ?Color:string * ?Opacity:float * ?Labels:seq&lt;string&gt; * ?TextPosition:TextPosition * ?TextFont:Font * ?StackGroup:string * ?Orientation:Orientation * ?GroupNorm:GroupNorm * ?UseWebGL:bool -&gt; GenericChart<br />&#160;&#160;static member Candlestick : stockTimeSeries:seq&lt;DateTime * StockData&gt; * ?Increasing:Line * ?Decreasing:Line * ?WhiskerWidth:float * ?Line:Line * ?XCalendar:Calendar -&gt; GenericChart<br />&#160;&#160;static member Candlestick : open:seq&lt;#IConvertible&gt; * high:seq&lt;#IConvertible&gt; * low:seq&lt;#IConvertible&gt; * close:seq&lt;#IConvertible&gt; * x:seq&lt;#IConvertible&gt; * ?Increasing:Line * ?Decreasing:Line * ?WhiskerWidth:float * ?Line:Line * ?XCalendar:Calendar -&gt; GenericChart<br />&#160;&#160;...</div>
<div class="fsdocs-tip" id="fs21">static member Chart.Point : xy:seq&lt;#System.IConvertible * #System.IConvertible&gt; * ?Name:string * ?Showlegend:bool * ?MarkerSymbol:StyleParam.Symbol * ?Color:string * ?Opacity:float * ?Labels:seq&lt;string&gt; * ?TextPosition:StyleParam.TextPosition * ?TextFont:Font * ?StackGroup:string * ?Orientation:StyleParam.Orientation * ?GroupNorm:StyleParam.GroupNorm * ?UseWebGL:bool -&gt; GenericChart.GenericChart<br />static member Chart.Point : x:seq&lt;#System.IConvertible&gt; * y:seq&lt;#System.IConvertible&gt; * ?Name:string * ?Showlegend:bool * ?MarkerSymbol:StyleParam.Symbol * ?Color:string * ?Opacity:float * ?Labels:seq&lt;string&gt; * ?TextPosition:StyleParam.TextPosition * ?TextFont:Font * ?StackGroup:string * ?Orientation:StyleParam.Orientation * ?GroupNorm:StyleParam.GroupNorm * ?UseWebGL:bool -&gt; GenericChart.GenericChart</div>
<div class="fsdocs-tip" id="fs22">static member Chart.Combine : gCharts:seq&lt;GenericChart.GenericChart&gt; -&gt; GenericChart.GenericChart</div>
<div class="fsdocs-tip" id="fs23">module GenericChart<br /><br />from Plotly.NET</div>
<div class="fsdocs-tip" id="fs24">val toChartHTML : gChart:GenericChart.GenericChart -&gt; string</div>
<div class="fsdocs-tip" id="fs25">module TwoPointDifferentiation<br /><br />from FSharp.Stats.Integration.Differentiation</div>
<div class="fsdocs-tip" id="fs26">val testFunction : x:float -&gt; float</div>
<div class="fsdocs-tip" id="fs27">val test1 : float</div>
<div class="fsdocs-tip" id="fs28">val differentiate : h:float -&gt; f:(float -&gt; float) -&gt; x:float -&gt; float</div>
<div class="fsdocs-tip" id="fs29">val test2 : float</div>
<div class="fsdocs-tip" id="fs30">val test3 : float</div>
<div class="fsdocs-tip" id="fs31">val hArray : float []</div>
<div class="fsdocs-tip" id="fs32">val test4 : float</div>
<div class="fsdocs-tip" id="fs33">val differentiateOptimalHBy : hArr:float [] -&gt; f:(float -&gt; float) -&gt; x:float -&gt; float</div>
<div class="fsdocs-tip" id="fs34">val test5 : float</div>
<div class="fsdocs-tip" id="fs35">val differentiateOptimalH : f:(float -&gt; float) -&gt; x:float -&gt; float</div>

    </div>

    <!-- BEGIN SEARCH BOX: this adds support for the search box -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
    <script type="text/javascript">var fsdocs_search_baseurl = 'https://fslab.org/FSharp.Stats/'</script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.8/lunr.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.min.js"></script>
    <script type="text/javascript" src="https://fslab.org/FSharp.Stats/content/fsdocs-search.js"></script>
    <!-- END SEARCH BOX: this adds support for the search box -->
</body>

</html>